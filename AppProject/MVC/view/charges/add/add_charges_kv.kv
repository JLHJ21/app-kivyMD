
<CustomOneLineIconListItem>:

    IconLeftWidget:
        icon: root.icon


<ChargeAddPage>:
    name: "ChargeAddPage"
    on_pre_enter: root.onPreEnterFunctions()

    MDBoxLayout:

        orientation: 'vertical'
        size_hint: 1, 1

        padding: dp(32), dp(root.manager.parent.parent.ids.toolbar.height * 1.3), dp(32), dp(root.manager.parent.parent.ids.toolbarbottom.height)
    
        MDBoxLayout:
            orientation: 'vertical'
            #adaptive_height: True
            
            size_hint_y: None
            height: self.minimum_height  # required to size GridLayout

            spacing: dp(10)

            MDGridLayout: 
                cols: 1

                
                size_hint_y: None
                height: self.minimum_height  # required to size GridLayout

                MDLabel:
                    padding: dp(1), dp(1)
                    adaptive_height: True
                    text: 'Elegir un proveedor'
                    font_style: 'H5'
                    halign: 'center'

                MDGridLayout:
                    cols: 2
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: dp(20)
                    padding: dp(1), dp(1)

                    MDTextField:
                        id: searchingSupplier
                        mode: 'rectangle'
                        text: ''
                        hint_text: 'Proveedor'
                        focus: True
                        write_tab: False
                        max_text_length: 35

                    
                    MDFloatingActionButton:
                        icon: "account-multiple-plus"
                        type: "standard"
                        on_release: root.list_suppliers(root.ids.searchingSupplier.text) 
                        elevation: 1
 
        RecycleView:
            viewclass: 'MDFlatButton'

            id: rvV
            key_viewclass: 'viewclass'
            
            key_size: 'height'
            adaptive_height: True
            padding: dp(1), dp(10)
        
            size_hint_y: None
            #La altura del rvV es cambiado desde el python
            height: dp(100)

            RecycleBoxLayout:
                padding: dp(10)
                default_size: None, dp(48)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'

        MDScrollView:
            MDGridLayout:
                cols: 1
                #orientation: 'vertical'
                #size_hint: 1, 1
                id: BoxLayoutChargeAdd
                size_hint_y: None
                height: self.minimum_height  # required to size GridLayout

                #COLUMNA UNO
                MDGridLayout:
                    id: FirstItemMDGridLayout
                    cols: 6
                    spacing: dp(20)
                    padding: dp(1), dp(5), dp(1), dp(1)
                    
                    size_hint_y: None
                    height: dp(60)

                    TextInputProductName:
                        id: idProducto
                        mode: 'rectangle'
                        text: ''
                        hint_text: 'Producto'
                        focus: True
                        icon_left: "alpha-p-circle-outline"

                        max_text_length: 35
                        write_tab: False
                        #on_text: root.ChangeIconProduct(root.ids.idProducto.text)
                        verificationProduct: False

                        required: True


                    TextInputBuyAndProfit:
                        id: idCantidad
                        mode: 'rectangle'
                        text: '' 
                        hint_text: 'Cantidad'
                        focus: True

                        max_text_length: 10

                        input_filter: 'int'

                        write_tab: False
                        required: True

                    TextInputBuyAndProfit:
                        id: idCompra
                        mode: 'rectangle'
                        text: ''
                        hint_text: 'Compra'
                        focus: True

                        max_text_length: 10
                        max_characters: 10
                        #input_filter: 'float'
                        write_tab: False
                        required: True

                        on_text: root.updateNumberTextChargeNew()

                        
                    TextInputBuyAndProfit:
                        id: idGanancia
                        mode: 'rectangle'
                        text: ''
                        hint_text: 'Ganancia'

                        max_text_length: 10
                        max_characters: 10
                        #input_filter: 'float'
                        write_tab: False
                        required: True

                        on_text: root.updateNumberTextChargeNew()


                    MDGridLayout:
                        cols: 1
                        adaptive_height: True
                        size_hint_x: None
                        width: SwitchChargeAdd.width


                        MDRectangleFlatButton:
                            id: SwitchChargeAdd
                            text: 'Buscar item'
                            valign: 'center'
                            rounded_button: True                 
                            pos_hint: {'center_x': .5, 'center_y': .5}

                    MDFloatingActionButton:

                        id: buttonAddItemCharge

                        icon: "account-plus"
                        type: "small"
                        on_release: root.AddItemCharge('FirstItemMDGridLayout', 'buttonAddItemCharge')
                        elevation: 0
                        pos_hint: {'center_x': .5, 'center_y': .5}

        #DINERO QUE SE GASTARA
        MDBoxLayout:
            height: dp(100)
            orientation: 'vertical'
            MDGridLayout:
                cols:2
                height: self.minimum_height

                #Proveedores
                MDLabel:
                    text: 'Compras'
                    halign: 'center'
                    font_style: 'H6'
                MDLabel:
                    id: moneyItemBuy
                    text: '0$'
                    halign: 'center'
                    font_style: 'H6'

                #Ganancias
                MDLabel:
                    text: 'Ganancias'
                    halign: 'center'
                    font_style: 'H6'
                MDLabel:
                    id: moneyItemToSell
                    text: '0$'
                    halign: 'center'
                    font_style: 'H6'
                    underline: True

                #Total
                MDLabel:
                    text: 'Total'
                    halign: 'center'
                    font_style: 'H6'
                
                MDLabel:
                    id: totalMoney
                    text: '0$'
                    halign: 'center'
                    font_style: 'H6'
                    

        #BOTONES
        MDGridLayout:
            cols: 3
            spacing: dp(20)
            adaptive_height: True
            padding: dp(32)

            MDRectangleFlatButton:
                text: 'Cancelar'
                size_hint_x: 0.4


            MDLabel:
                size_hint_x: 0.1

            MDRaisedButton:
                text: 'Aceptar'
                size_hint_x: 0.4
                on_release: root.SubmitData()
