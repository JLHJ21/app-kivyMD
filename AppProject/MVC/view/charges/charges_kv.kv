
# PAGINA DE ENCARGO
<ChargePage>:
    name: "ChargePage"

    MDBoxLayout:
        id: boxLayoutAllScreen
        orientation: 'vertical'
        padding: dp(16), dp(root.manager.parent.parent.ids.toolbar.height), dp(16), dp(root.manager.parent.parent.ids.toolbarbottom.height)

        MDScrollView:
            MDGridLayout:
                cols: 1
                            
                size_hint_y: None
                height: self.minimum_height

                MDGridLayout:
                    cols: 5
                    spacing: dp(10)
                    padding: dp(16), dp(16), dp(16), dp(16)

                    size_hint_y: None
                    height: dp(root.manager.parent.parent.ids.toolbar.height)

                    MDTextField:
                        id: ButtonMenuSearchingCharge

                        size_hint_x: None
                        width: "100dp"

                        text: "TODO"
                        hint_text: "Tipo:"
                        icon_right: "arrow-down"

                        mode: "rectangle"
                        readonly: True 
                        focus: True

                        on_focus: if self.focus: root.CallbackMenuCharge(self)

                    MDTextField:
                        id: SearchProduct
                        hint_text: 'Buscar encargo'
                        icon_right: "android"
                        mode: "rectangle"

                        size_hint_x: None
                        width: "400dp"

                    MDFloatingActionButton:
                        id: ButtonSearchingCharge

                        icon: "book-search"
                        type: "standard"

                        #on_release: root.test()

                    MDLabel:

                    MDFloatingActionButton:
                        icon: "account-multiple-plus"
                        type: "standard"

                        on_release: root.ChangePageChargeAddPage()

                
                RecycleViewTable:

                    size_hint_y: None
                    height: dp(400)

                    id: tableCharge
                    id_table: "tableCharge"

                    padding: dp(16), dp(root.manager.parent.parent.ids.toolbar.height / 2), dp(16), dp(root.manager.parent.parent.ids.toolbarbottom.height /2)

                    objecto: self
                    need_image: False
                    columns: 4
                    root: root

                    titles_labels: ["Proveedor", "Compra (Peso)", 'Fecha', "Cant. Productos"]
                    list_table_data: ["name_supplier", "buy_products", "date", "products"]

                    differentColumn: 'CancelAndDelete'

                    #Datos del Modal de eliminar "¿Esta seguro?"
                    modalChooseDeleteConfirmationTitle: '¿De verdad quiere eliminar esta compra?'
                    modalChooseDeletConfirmationeText: 'Recuerda que esta opción no se puede revertir.'
                    modalChooseDeleteConfirmation: 'from MVC.model.charges.charges_model import ChargesDB; ChargesDB.DeleteCharge(global_id_modal); self = global_self_modal; exec(self.test)'
                    
                    test: 'self.objecto.DictionaryDataset.update(self.objecto.root.ShowDataChargesController(self.objecto.StartPagination, self.objecto.StaticItemsAccountPagination, self.objecto.DirectionPagination))'


