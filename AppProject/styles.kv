
<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"


<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True

<ContentNavigationDrawer>

    MDNavigationDrawerMenu:

        MDNavigationDrawerHeader:
            title: "BroxElt S.A."
            title_color: "#4a4939"
            text: "Bienvenido XXXXX"
            source: "logo.jpg"
            spacing: "4dp"
            padding: "12dp", 0, 0, "40dp"

        MDNavigationDrawerLabel:
            text: "General"

        MDNavigationDrawerDivider:
            padding: dp(10),0, dp(12), dp(1)

        DrawerClickableItem:
            icon: "home"
            text_right_color: "#4a4939"
            text: "Panel de control"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "cash-register"
            text_right_color: "#4a4939"
            text: "Cajero"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "store"
            text_right_color: "#4a4939"
            text: "Almacen"
            on_press:
                root.screen_manager.current = "StorePage"

                app.root.ids.toolbar.title = self.text
        
        DrawerClickableItem:
            icon: "cash-clock"
            text_right_color: "#4a4939"
            text: "Presupuesto"
            on_press:
                root.screen_manager.current = "StorePageUpdate"

                app.root.ids.toolbar.title = self.text
        
        DrawerClickableItem:
            icon: "account-cash"
            text_right_color: "#4a4939"
            text: "Cliente"
            on_press:
                root.screen_manager.current = "scr 2"

                app.root.ids.toolbar.title = self.text               

        MDNavigationDrawerLabel:
            text: "Administrador"
            padding: dp(16), dp(10), dp(12), dp(10)


        MDNavigationDrawerDivider:
            padding: dp(10), 0, dp(12), dp(1)

        DrawerClickableItem:
            icon: "cube-send"
            text_right_color: "#4a4939"
            text: "Encargos"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "cash-multiple"
            text_right_color: "#4a4939"
            text: "Divisas"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "account-multiple"
            text_right_color: "#4a4939"
            text: "Proveedores"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text
        
        DrawerClickableItem:
            icon: "cash-remove"
            text_right_color: "#4a4939"
            text: "Prestamos"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "receipt-text-clock"
            text_right_color: "#4a4939"
            text: "Historial de Ventas"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text
        
        DrawerClickableItem:
            icon: "text-box-search"
            text_right_color: "#4a4939"
            text: "Historial de Dinero"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text


                
        MDNavigationDrawerLabel:
            text: "Configuraciones"
            padding: dp(16), dp(10), dp(12), dp(10)

        MDNavigationDrawerDivider:
            padding: dp(10), 0, dp(12), dp(1)

        DrawerClickableItem:
            icon: "account-cog"
            text_right_color: "#4a4939"
            text: "Configuracion"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text

MDScreen:

    MDTopAppBar:
        id: toolbar
        pos_hint: {"top": 1}
        elevation: 4
        title: "MDNavigationDrawer"
        use_overflow: True
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        right_action_items:
            [
            ["cash-100", lambda x: app.CallbackMenuChangeMoney(x), "Tipo de tasa - Dolar", "Tipo de tasa - Dolar"],
            ["weather-sunny", lambda x: app.CallbackModeScreen(x, 'oscuro'), "Modo Claro", "Modo Claro"],
            ["account-settings", lambda x: app.CallbackMenuUser(x), "Perfil" , "Perfil"],
            ]
            
    MDTopAppBar:
        id: toolbarbottom
        type_height: "small"
        headline_text: "Headline"
        title: "BroxElt S.A."
        elevation: 4
        anchor_title: "left"
        use_overflow: True
        
        right_action_items:
            [             
            ["account-cog", lambda x: app.callback(x), "", "Configuracion"],             
            ["cash-remove", lambda x: app.callback(x), "", "Prestamos"],             
            ["home", lambda x: app.ChangePage("InitialPage", "Inicio"), "", "Inicio"],    
            ["cash-register", lambda x: app.callback(x), "", "Cajero"],             
            ["store", lambda x: app.callback(x), "", "Almacen"],             
            ]

    MDNavigationLayout:

        MDScreenManager:
            id: screen_manager

            MDScreen:
                name: "InitialPage"

                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint: 1, 1
                    MDGridLayout:
                        cols: 1
                        padding: dp(0), dp(toolbar.height), dp(0), dp(toolbarbottom.height)
                        MDBoxLayout:
                            adaptive_height: True               
                            size_hint: 1, 1

                            MDGridLayout:
                                cols: 1                                
                                
                                MDLabel:
                                    markup: True
                                    padding: dp(50), dp(20), dp(16), dp(1)
                                    text: "[b][i]Datos[/i][/b]"      
                                    halign: "left"
                                    font_style: "H3"
                                    adaptive_height: True       

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, None
                                    height:75


                                    MDGridLayout:
                                    
                                        cols: 2                             
                                        padding: dp(1), dp(10), dp(1), dp(1)


                                        MDBoxLayout:
                                            padding: dp(50), dp(1), dp(25), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "account"
                                                pos_hint: {"center_x": .5, "center_y": .75} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": 1, "center_y": .7} 
                                                text: "root"
                                                hint_text: "Nombre de usuario:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True

                                        MDBoxLayout:

                                            padding: dp(25), dp(1), dp(50), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "account-hard-hat"
                                                pos_hint: {"center_x": .5, "center_y": .75} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": 1, "center_y": .7} 
                                                text: "root"
                                                hint_text: "Nivel de usuario:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True
                                            

                                MDLabel:                                
                                    markup: True
                                    padding: dp(50), dp(1), dp(1), dp(1)
                                    text: "[b][i]Cuenta[/i][/b]"
                                    halign: "left"
                                    font_style: "H3"
                                    adaptive_height: True             

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, None
                                    height:75


                                    MDGridLayout:
                                    
                                        cols: 2                             
                                        padding: dp(1), dp(10), dp(1), dp(1)


                                        MDBoxLayout:
                                            padding: dp(50), dp(1), dp(25), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "cash-plus"
                                                pos_hint: {"center_x": .5, "center_y": .75} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": 1, "center_y": .7} 
                                                text: "100$"
                                                hint_text: "Dinero Credito:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True

                                        MDBoxLayout:

                                            padding: dp(25), dp(1), dp(50), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "cash-minus"
                                                pos_hint: {"center_x": .5, "center_y": .75} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": 1, "center_y": .7} 
                                                text: "24$"
                                                hint_text: "Dinero prestado:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True
                                
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, None
                                    height:75

                                    MDGridLayout:
                                    
                                        cols: 3                            
                                        padding: dp(1), dp(10), dp(1), dp(1)

                                        MDBoxLayout:
                                            padding: dp(50), dp(1), dp(1), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "cash"
                                                pos_hint: {"center_x": .5, "center_y": .75} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": .5, "center_y": .7} 
                                                text: "100$"
                                                hint_text: "Dinero en dólares:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True
                                    
                                        MDBoxLayout:
                                            padding: dp(30), dp(1), dp(30), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "cash"
                                                pos_hint: {"center_x": .5, "center_y": .75} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": .5, "center_y": .7} 
                                                text: "100$"
                                                hint_text: "Dinero en pesos:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True
                                        
                                        MDBoxLayout:
                                            padding: dp(1), dp(1), dp(50), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "cash"
                                                pos_hint: {"center_x": .5, "center_y": .75} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": .5, "center_y": .7} 
                                                text: "100$"
                                                hint_text: "Dinero en bolívares:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True

                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, None
                                    height:75

                                    MDGridLayout:
                                    
                                        cols: 1                            
                                        padding: dp(1), dp(10), dp(1), dp(1)

                                        MDBoxLayout:
                                            padding: dp(230), dp(1), dp(230), dp(1)

                                            MDIcon:
                                                padding: dp(1), dp(1), dp(10), dp(1)
                                                icon: "cash"
                                                pos_hint: {"center_x": .5, "center_y": .8} 
                                                font_size: '36sp' 
                                            MDTextField:
                                                pos_hint: {"center_x": .5, "center_y": .7} 
                                                text: "100$"
                                                hint_text: "Dinero mensual:"
                                                mode: "rectangle"
                                                disabled: True 
                                                focus: True

            MDScreen:
                name: "StorePageUpdate"
                
                MDBoxLayout:

                    padding: dp(1), dp(toolbar.height), dp(1), dp(toolbarbottom.height)
                    
                    MDScrollView:
                        MDBoxLayout:

                            orientation: 'horizontal'
                            size_hint: 1, 1
                            adaptive_height: True

                            # LINEA O BORDE
                            #canvas:
                            #    Color:
                            #        rgba: .1, .1, 1, .9
                            #    Line:
                            #        width: 2.
                            #        rectangle: (self.x + 10, self.y - 10, self.width -20, self.height)
                                    
                            MDGridLayout:
                                cols: 1
                                padding: dp(16), dp(8)
                                size_hint_y: None
                                height: self.minimum_height  # required to size GridLayout

                                        
                                MDGridLayout:
                                    cols: 1
                                    padding: dp(1), dp(32)

                                    size_hint_y: None
                                    height: self.minimum_height  # required to size GridLayout

                                    MDLabel:
                                        text: "Cambiar Producto"
                                        halign: "center"
                                        font_style: "H4"

                                MDGridLayout:
                                    cols: 3
                                    spacing: dp(20)
                                    padding: dp(16), dp(0), dp(16), dp(8) 
                                    size_hint_y: None
                                    height: self.minimum_height  # required to size GridLayout
                                    MDLabel:
                                        size_hint_x: 0.38
                                        #width: "250dp"
                                        padding: dp(32), dp(1)

                                        text: "Nombre:"
                                        halign: "right"
                                        font_style: "H5"
                                    
                                    MDTextField:

                                        id: name_field
                                        size_hint_x: 0.7
                                        #width: "375dp"

                                        hint_text: "Nombre del producto"

                                        required: True

                                        helper_text_mode: "on_error"
                                        helper_text: "Por favor, ingrese un nombre del producto." if len(self.text) == 0 else ""

                                        max_text_length: 25
                                        mode: "rectangle"
                                        line_color_normal: "red" if len(self.text) == 0 else "blue"
                                    
                                    MDLabel:
                                        size_hint_x: 0.1

                                MDGridLayout:
                                    cols: 3
                                    spacing: dp(20)
                                    padding: dp(16), dp(8)
                                    #padding: ["16dp", "16dp", "16dp", "16dp"]  if len(inputSupplierMenu.text) == 0 else ["16dp", "8dp", "16dp", "8dp"] 
                                    size_hint_y: None
                                    height: self.minimum_height  # required to size GridLayout
                                    MDLabel:
                                        size_hint_x: 0.38
                                        #width: "250dp"
                                        padding: dp(32), dp(1)

                                        text: "Proveedor:"
                                        halign: "right"
                                        font_style: "H5"
                                    
                                    MDTextField:

                                        id: inputSupplierMenu
                                        size_hint_x: 0.7
                                        #width: "375dp"
                                        text: ""
                                        hint_text: "Proveedor del producto"

                                        required: True
                                        readonly: True
                                        
                                        helper_text_mode: "on_error"
                                        helper_text: "Por favor, ingrese un proveedor del producto." if len(self.text) == 0 else ""
                                        mode: "rectangle"
                                        
                                        on_focus: if self.focus: app.MenuSupplierStore.open()
                                        line_color_normal: "red" if len(self.text) == 0 else "blue"
                                    
                                    MDLabel:
                                        size_hint_x: 0.1
                                MDGridLayout:
                                    cols: 3
                                    spacing: dp(20)
                                    padding: dp(16), dp(8)
                                    size_hint_y: None
                                    height: self.minimum_height  # required to size GridLayout
                                    MDLabel:
                                        size_hint_x: 0.38
                                        #width: "250dp"
                                        padding: dp(32), dp(1)

                                        text: "Cantidad:"
                                        halign: "right"
                                        font_style: "H5"
                                    
                                    MDTextField:

                                        id: name_field
                                        size_hint_x: 0.7
                                        #width: "375dp"

                                        hint_text: "Cantidad del producto"

                                        required: True

                                        helper_text_mode: "on_error"
                                        helper_text: "Por favor, ingrese la cantidad del producto." if len(self.text) == 0 else ""

                                        max_text_length: 5
                                        mode: "rectangle"
                                        line_color_normal: "red" if len(self.text) == 0 else "blue"
                                    
                                    MDLabel:
                                        size_hint_x: 0.1

                                MDGridLayout:
                                    cols: 3
                                    spacing: dp(20)
                                    padding: dp(16), dp(8)
                                    size_hint_y: None
                                    height: self.minimum_height  # required to size GridLayout
                                    MDLabel:
                                        size_hint_x: 0.38
                                        #width: "250dp"
                                        padding: dp(32), dp(1)

                                        text: "Precio:"
                                        halign: "right"
                                        font_style: "H5"
                                    
                                    MDTextField:

                                        id: name_field
                                        size_hint_x: 0.7
                                        width: "375dp"

                                        hint_text: "Precio del producto"

                                        required: True

                                        helper_text_mode: "on_error"
                                        helper_text: "Por favor, ingrese el precio del producto." if len(self.text) == 0 else ""

                                        max_text_length: 10
                                        mode: "rectangle"
                                        line_color_normal: "red" if len(self.text) == 0 else "blue"
                                    
                                    MDLabel:
                                        size_hint_x: 0.1

                                MDGridLayout:
                                    cols: 3
                                    spacing: dp(20)
                                    padding: dp(16), dp(16)
                                    size_hint_y: None
                                    height: self.minimum_height  # required to size GridLayout
                                    MDLabel:
                                        size_hint_x: 0.38
                                        #width: "250dp"
                                        padding: dp(32), dp(1)
                                        #padding: ["16dp", "16dp", "16dp", "16dp"]  if len(inputSupplierMenu.text) == 0 else ["16dp", "8dp", "16dp", "8dp"] 

                                        text: "Imagen:"
                                        font_style: "H5"
                                        halign: "right"

                                    
                                    MDRaisedButton:

                                        #id: name_field
                                        size_hint_x: 0.7
                                        padding: dp(1), dp(1)
                                        #width: "375dp"

                                        #hint_text: "Imagen del producto"

                                        required: True

                                        #helper_text_mode: "on_error"
                                        #helper_text: "Por favor, ingrese la imagen del producto." if len(self.text) == 0 else ""

                                        #max_text_length: 10
                                        #mode: "rectangle"
                                        #line_color_normal: "red" if len(self.text) == 0 else "blue"

                                        #on_press: app.root.file_manager_open() #app.root.file_manager_open()

                                        text: "Elegir imagen" if len(imageProduct.source) == 0 else "Imagen elegida"
                                        text_color: "white"
                                        line_color: "blue"
                                        md_bg_color: "blue"

                                        on_press: screen_manager.current = "chooseimagePage"
                                        
                                    
                                    MDLabel:
                                        size_hint_x: 0.1


                                MDGridLayout:

                                    cols: 2

                                    size_hint_y: None
                                    padding: dp(80), dp(16), dp(98), dp(16)

                                    height: root.height / 2  # required to size GridLayout

                                    Label:
                                    #    canvas.before:
                                    #        Color: 
                                    #            rgba: (1,0,1,1)
                                    #        Rectangle:
                                    #            size: self.size
                                    #            pos: self.pos
                                    FitImage:
                                        id: imageProduct
                                        source: "question.jpg"
                                        #allow_stretch: True
                                        #keep_ratio: False
                                        size_hint_x: 1


                                MDGridLayout:
                                    cols: 2
                                    spacing: dp(20)
                                    padding: dp(16), dp(8)
                                    size_hint_y: None
                                    
                                    height: self.minimum_height  # required to size GridLayout

                                    MDRectangleFlatButton:
                                        size_hint_x: 0.5
                                        text: "Cancelar"
                                        line_color: "red"
                                        text_color: "red"

                                    MDRaisedButton:
                                        size_hint_x: 0.5
                                        text: "Aceptar"
                                        text_color: "white"
                                        line_color: "blue"
                                        md_bg_color: "blue"
            
            ChooseImage:
            MDScreen:
                name: "StorePage"

                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint: 1, 1
                    MDGridLayout:
                        cols: 1
                        padding: dp(16), dp(toolbar.height), dp(16), dp(toolbarbottom.height)
                                
                        MDGridLayout:
                            cols: 3
                            spacing: dp(20)
                            padding: dp(16), dp(16), dp(16), dp(16)
                            size_hint_y: None
                            height: dp(toolbar.height)
                            MDTextField:
                                id: ButtonMenuSearchingStore

                                size_hint_x: None
                                width: "100dp"

                                text: "TODO"
                                hint_text: "Tipo:"
                                icon_right: "arrow-down"

                                mode: "rectangle"
                                readonly: True 
                                focus: True


                                on_focus: if self.focus: app.MenuProductoTypeStore.open()

                            MDTextField:
                                id: SearchProduct
                                hint_text: 'Buscar producto'
                                icon_right: "android"
                                mode: "rectangle"

                            MDFloatingActionButton:
                                id: ButtonSearchingStore

                                width: "150dp"
                                icon: "book-search"
                                style: "standard"
                                width: "100dp"
                                
                        ClientsTable:

                                            

                               

        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
        
            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer


#CLASE Kivy que llama a la página "ChooseImage" para elegir imagen del producto
<ChooseImage>:
    name: "chooseimagePage"
    
    on_pre_enter: root.file_manager_open() #app.root.file_manager_open()
