##: import RecycleViewTable templates.table.table
#:include templates/table/table.kv
#:include MVC/view/home/home_kivy.kv
#:include MVC/view/cashier/cashier_kivy.kv
#:include MVC/view/store/store_kivy.kv
#:include MVC/view/store/update/store_update_kivy.kv
#:include MVC/view/store/choose_image/choose_image_kivy.kv
#:include MVC/view/clients/clients_kv.kv
#:include MVC/view/configuration/configuration_kv.kv
#:include MVC/view/foreign_exchange/foreign_exchange_kv.kv
#:include MVC/view/foreign_exchange/update/update_foreign_exchange_kv.kv
#:include MVC/view/sales_history/sales_history_kv.kv
#:include MVC/view/supplier/supplier_kv.kv
#:include MVC/view/supplier/update/update_supplier_kv.kv
#:include MVC/view/supplier/add/add_supplier_kv.kv
#:include MVC/view/charges/charges_kv.kv
#:include MVC/view/charges/add/add_charges_kv.kv
#:include MVC/view/money_history/money_history_kv.kv
#:include MVC/view/loans/loans_kv.kv
#:include MVC/view/loans/add/add_loans_kv.kv
#:include MVC/view/loans/update/update_loans_kv.kv












#TOOLBAR
<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"


#TOOLBAR
<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True

#MENU SLICE
<ContentNavigationDrawer>

    MDNavigationDrawerMenu:

        MDNavigationDrawerHeader:
            title: "BroxElt S.A."
            title_color: "#4a4939"
            text: "Bienvenido XXXXX"
            source: "images/logo.jpg"
            spacing: "4dp"
            padding: "12dp", 0, 0, "40dp"

        MDNavigationDrawerLabel:
            text: "General"

        MDNavigationDrawerDivider:
            padding: dp(10),0, dp(12), dp(1)

        DrawerClickableItem:
            icon: "home"
            text_right_color: "#4a4939"
            text: "Panel de control"

            on_press:
                root.screen_manager.current = "InitialPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "cash-register"
            text_right_color: "#4a4939"
            text: "Cajero"

            on_press:
                root.screen_manager.current = "CashierPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "store"
            text_right_color: "#4a4939"
            text: "Almacen"
            on_press:
                root.screen_manager.current = "StorePage"

                app.root.ids.toolbar.title = self.text
        
        
        DrawerClickableItem:
            icon: "account-cash"
            text_right_color: "#4a4939"
            text: "Cliente"
            on_press:
                root.screen_manager.current = "ClientsPage"

                app.root.ids.toolbar.title = self.text               

        MDNavigationDrawerLabel:
            text: "Administrador"
            padding: dp(16), dp(10), dp(12), dp(10)


        MDNavigationDrawerDivider:
            padding: dp(10), 0, dp(12), dp(1)

        DrawerClickableItem:
            icon: "cube-send"
            text_right_color: "#4a4939"
            text: "Encargos"

            on_press:
                root.screen_manager.current = "ChargePage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "cash-multiple"
            text_right_color: "#4a4939"
            text: "Divisas"

            on_press:
                root.screen_manager.current = "ForeignExchangePage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "account-multiple"
            text_right_color: "#4a4939"
            text: "Proveedores"

            on_press:
                root.screen_manager.current = "SupplierPage"

                app.root.ids.toolbar.title = self.text
        
        DrawerClickableItem:
            icon: "cash-remove"
            text_right_color: "#4a4939"
            text: "Prestamos"

            on_press:
                root.screen_manager.current = "LoanPage"

                app.root.ids.toolbar.title = self.text

        DrawerClickableItem:
            icon: "receipt-text-clock"
            text_right_color: "#4a4939"
            text: "Historial de Ventas"

            on_press:
                root.screen_manager.current = "SalesHistoryPage"

                app.root.ids.toolbar.title = self.text
        
        DrawerClickableItem:
            icon: "text-box-search"
            text_right_color: "#4a4939"
            text: "Historial de Dinero"

            on_press:
                root.screen_manager.current = "MoneyHistoryPage"

                app.root.ids.toolbar.title = self.text


                
        MDNavigationDrawerLabel:
            text: "Configuraciones"
            padding: dp(16), dp(10), dp(12), dp(10)

        MDNavigationDrawerDivider:
            padding: dp(10), 0, dp(12), dp(1)

        DrawerClickableItem:
            icon: "account-cog"
            text_right_color: "#4a4939"
            text: "Configuracion"

            on_press:
                root.screen_manager.current = "ConfigurationPage"

                app.root.ids.toolbar.title = self.text





HeaderAndFooter:

    orientation: "vertical"

    MDNavigationLayout:

        MDScreenManager:
            id: screen_manager
            #Pagina de inicio
            SignIn:

            #Pagina de registrar cuenta
            SignOn:

            #Pagina de panel de control, o de inicio
            InitialPage:

            #Pagina del cajero
            CashierPage:
                
            #Pagina del almacen, junto con su pagina de modificacion y de elegir imagen en orden respectivamente
            StorePage:       
            StoreUpdatePage:
            ChooseImagePage:

            #Pagina de cliente
            ClientsPage:

            #Pagina de configuracion
            ConfigurationPage:

            #Pagina de divisas
            ForeignExchangePage:
            UpdateForeignExchangePage:

            #Pagina de historial de ventas
            SalesHistoryPage:

            #Pagina de proveedores
            SupplierPage:
            SupplierUpdatePage:
            SupplierAddPage:

            #Pagina de Encargos
            ChargePage:
            ChargeAddPage:

            #Pagina de historial de dinero
            MoneyHistoryPage:

            #Pagina de prestamos
            LoanPage:
            LoanUpdatePage:
            LoanAddPage:


        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
        
            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer

<HeaderAndFooter>:
    id: headerandfooter

    toolbar_object: toolbar

    toolbarbottom_object: toolbarbottom

    MDTopAppBar:
        id: toolbar
        pos_hint: {"top": 1}
        elevation: 4
        title: "Panel de Control"
        use_overflow: True
        left_action_items: [["menu", lambda x: root.ids.nav_drawer.set_state("open")]]
        right_action_items:
            [
            ["cash-100", lambda x: app.CallbackMenuChangeMoney(x), "Tipo de tasa - Dolar", "Tipo de tasa - Dolar"],
            ["weather-sunny", lambda x: app.CallbackModeScreen(x, 'oscuro'), "Modo Claro", "Modo Claro"],
            ["account-settings", lambda x: app.CallbackMenuUser(x), "Perfil" , "Perfil"],
            ]
            
    MDTopAppBar:
        id: toolbarbottom
        type_height: "small"
        headline_text: "Headline"
        title: "BroxElt S.A."
        elevation: 4
        anchor_title: "left"
        use_overflow: True
        
        right_action_items:
            [             
            ["account-cog", lambda x: app.callback(x), "", "Configuracion"],             
            ["cash-remove", lambda x: app.callback(x), "", "Prestamos"],             
            ["home", lambda x: app.ChangePage("InitialPage", "Panel de control"), "", "Panel de control"],    
            ["cash-register", lambda x: app.callback(x), "", "Cajero"],             
            ["store", lambda x: app.callback(x), "", "Almacen"],             
            ]



<SignIn>:
    name: "SignIn"


    MDBoxLayout:
        orientation: 'horizontal'
        padding: dp(100)

        MDGridLayout:
            cols: 1

            MDLabel:
                text: 'INICIAR SESION'
                font_style: "H3"
                halign: 'center'
                adaptive_height: True
            
            MDGridLayout:
                cols: 1
                padding: dp(50)
                spacing: dp(20)
                adaptive_height: True

                MDTextField:
                    id: usernameSignIn
                    icon_left: "account"
                    hint_text: 'Escribir nombre de usuario'
                    mode: 'rectangle'

                MDTextField:
                    id: passwordSignIn
                    icon_left: "account-key"
                    hint_text: 'Escribir contraseña'
                    mode: 'rectangle'
                    password: True
            
            MDGridLayout:
                cols: 3
                spacing: dp(20)
                adaptive_height: True
                padding: dp(16), dp(32), dp(16), dp(8)

                MDRectangleFlatButton:
                    text: 'Crear cuenta'
                    font_style: 'H5'
                    size_hint_x: 0.4

                    on_release: root.ChangePageToSignOn()

                MDLabel:
                    size_hint_x: 0.1

                MDRaisedButton:
                    text: 'Enviar'
                    font_style: 'H5'
                    size_hint_x: 0.4

                    on_release: root.SignIn(root.ids.usernameSignIn.text, root.ids.passwordSignIn.text)


<SignOn>:
    name: "SignOn"

    MDBoxLayout:
        #adaptive_height: True
        orientation: 'horizontal'
        padding: dp(100)
        MDScrollView:

            MDGridLayout:
                cols: 1
                adaptive_height: True

                MDLabel:
                    text: 'REGISTRAR CUENTA'
                    font_style: "H3"
                    halign: 'center'
                    adaptive_height: True
                
                MDGridLayout:
                    cols: 1
                    padding: dp(50)
                    spacing: dp(20)
                    adaptive_height: True

                    MDTextField:
                        id: usernameSignOn
                        icon_left: "account"
                        hint_text: 'Escribir nombre de usuario'
                        mode: 'rectangle'
                        required: True

                    MDTextField:
                        id: emailSignOn
                        icon_left: "email"
                        hint_text: 'Escribir correo electrónico'
                        mode: 'rectangle'
                        validator: "email"
                        required: True

                    MDTextField:
                        id: passwordSignOn
                        icon_left: "account-key"
                        hint_text: 'Escribir contraseña'
                        mode: 'rectangle'
                        password: True
                        required: True
                        max_text_length: 5
                    
                    MDTextField:
                        id: repeatPasswordSignOn
                        icon_left: "account-key"
                        hint_text: 'Repetir contraseña'
                        mode: 'rectangle'
                        password: True
                        required: True
                        max_text_length: 5
                
                MDGridLayout:
                    cols: 3
                    spacing: dp(20)
                    adaptive_height: True
                    padding: dp(16), dp(32), dp(16), dp(8)

                    MDRectangleFlatButton:
                        text: 'Iniciar sesión'
                        font_style: 'H5'
                        size_hint_x: 0.4

                        on_release: root.ChangePageToSignIn()

                    MDLabel:
                        size_hint_x: 0.1

                    MDRaisedButton:
                        text: 'Enviar'
                        font_style: 'H5'
                        size_hint_x: 0.4

                        on_release: root.CreateAccount(root.ids.usernameSignOn.text, root.ids.emailSignOn.text, root.ids.passwordSignOn.text, root.ids.repeatPasswordSignOn.text)




